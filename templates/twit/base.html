{% load static %}
<!doctype html>
<html lang="fa">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.rtl.min.css" integrity="sha384-beJoAY4VI2Q+5IPXjI207/ntOuaz06QYCdpWfWRv4lSFDyUSqsM0W+wiAMr2I185" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/ba7055dab6.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{% static 'twit/css/rtl.css'%}">
    <title>صفحه اصلی</title>
  </head>
  <body>
    {% block user_info %}{% endblock %}
    {% block twit_bar %}{% endblock %}
    {% block timeLine %}{% endblock %}
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script type="text/javascript">
        function get_likes(link, id) {
            $.ajax({
                        url: link,
                        success: function(s) {
                            console.log(s.likes)
                            $("#likes-count-" + id).html(s.likes)
                            $("#retweet-count-" + id).html(s.retweet)
                        },
                        error: function(error) {
                            console.log('err')
                        }

                    })
        }

        $(".like-btn").click(function(e) {
            e.preventDefault()
            var id = $(this).attr("data-pk")
            var link = "/api/" + id
            var url = $(this).attr("href")
            $.ajax({
                url: url,
                success: function(success) {
                    get_likes(link,id)
                },
                error: function(error) {
                    console.log(error)
                }
            })
        })

        $(".retweet-btn").click(function(e) {
            e.preventDefault()
            var id = $(this).attr("data-pk")
            var link = "/api/" + id
            var url = $(this).attr("href")
            $.ajax({
                url: url,
                success: function(success) {
                    get_likes(link,id)
                },
                error: function(error) {
                    console.log(error)
                }
            })
        })


    </script>
  </body>
</html>
